{{#section 'title'}}
    List Pengeluaran
{{/section}}
{{error}}

<div class="row almost-full">
    <div class="col s12 mt-20">
        <div class="col s12 mb-20 mt-20 center no-print">
            <span class="font-40">List Pengeluaran</span>
        </div>
        <div class="row">
            <div class="input-field">
                <a class="btn-floating btn-large waves-effect waves-light green modal-trigger" href="/add-expense" target="_blank"><i class="material-icons">add</i></a>
            </div>
            <div class="col s12">
                <span class="font-20 {{message.color}}-text" id="message">{{message.text}}</span>
            </div>
        </div>
        <div class="row">
            <div class="col s12 almost-full">
                <div class="home-table row">
                    <table class="bordered">
                        <thead>
                        <tr class="border-bottom">
                            <th width="7%">Expense ID</th>
                            <th width="5%">Tanggal</th>
                            <th width="5%">Status</th>
                            <th width="1%">
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        {{#each rows}}
                            <tr>
                                <td>{{@key}}</td>
                                <td>{{readableDate this.0.tanggal}}</td>
                                <td>{{expenseStatus this.0.status}}</td>
                                <td>
                                    <a class="btn-floating btn waves-effect waves-light blue modal-trigger" title="Lihat" href="#viewExp{{this.0.idexpense}}" ><i class="material-icons">search</i></a>

                                    <div id="viewExp{{this.0.idexpense}}" class="modal">
                                        <form action="" method="post">
                                            <div class="modal-content">
                                                <div class="col s12">
                                                    <div class="col s12 mb-20 mt-20 center">
                                                        <span class="font-40">Detail Expense</span>
                                                    </div>
                                                </div>
                                                <div class="hide-on-med-and-up">
                                                    <div class="row">
                                                        <div class="col s12 valign-wrapper border-bottom">
                                                            <div class="col s3">
                                                                <span>Status</span>
                                                            </div>
                                                            <div class="col s9 valign-wrapper">
                                                                <div class="col s1">
                                                                    <span>:</span>
                                                                </div>
                                                                <div class="col s10">
                                                                    <span>{{expenseStatus this.0.status}}</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col s12 valign-wrapper border-bottom">
                                                            <div class="col s3">
                                                                <span>Expense ID</span>
                                                            </div>
                                                            <div class="col s9 valign-wrapper">
                                                                <div class="col s1">
                                                                    <span>:</span>
                                                                </div>
                                                                <div class="col s10">
                                                                    <span>{{this.0.orderid}}</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="home-table row">
                                                        <table class="bordered">
                                                            <thead>
                                                            <tr class="border-bottom">
                                                                <th width="10%">Deskripsi Pengeluaran</th>
                                                                <th width="3%">Nominal</th>
                                                            </tr>
                                                            </thead>
                                                            <tbody>
                                                            {{#each this}}
                                                                {{#compare idexpense NULL operator="!="}}
                                                                    <tr>
                                                                        <td>{{nama}}</td>
                                                                        <td class="right-align">{{numberFormat nominal}}</td>
                                                                    </tr>
                                                                {{/compare}}
                                                            {{/each}}
                                                            <tr class="border-top">
                                                                <td>Total</td>
                                                                <td class="right-align">
                                                                    {{#each this}}
                                                                        {{#compare grandTotal NULL operator="!="}}
                                                                            {{numberFormat grandTotal}}
                                                                        {{/compare}}
                                                                    {{/each}}
                                                                </td>
                                                            </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                                <div class="hide-on-small-only">
                                                    <div class="row">
                                                        <div class="col s12">
                                                            <div class="col s9">
                                                                <div class="col s12 valign-wrapper">
                                                                    <div class="col l3 m4">
                                                                        <span class="font-20">Expense ID</span>
                                                                    </div>
                                                                    <div class="col l9 m8">
                                                                        <span class="font-20">: {{this.0.orderid}}</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="home-table row">
                                                        <table class="bordered">
                                                            <thead>
                                                            <tr class="border-bottom">
                                                                <th width="10%">Deskripsi Pengeluaran</th>
                                                                <th width="3%">Nominal</th>
                                                            </tr>
                                                            </thead>
                                                            <tbody>
                                                            {{#each this}}
                                                                {{#compare idexpense NULL operator="!="}}
                                                                    <tr>
                                                                        <td>{{nama}}</td>
                                                                        <td class="right-align">{{numberFormat nominal}}</td>
                                                                    </tr>
                                                                {{/compare}}
                                                            {{/each}}
                                                            <tr class="border-top">
                                                                <td>Total</td>
                                                                <td class="right-align">
                                                                    {{#each this}}
                                                                        {{#compare grandTotal NULL operator="!="}}
                                                                            {{numberFormat grandTotal}}
                                                                        {{/compare}}
                                                                    {{/each}}
                                                                </td>
                                                            </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer modal-fixed-footer">
                                                {{#compare this.0.status "1" operator="=="}}
                                                    {{#compare ../priv "1" operator="=="}}
                                                        <a class="btn waves-effect waves-light red modal-trigger left mb-10 ml-10" title="Hapus" href="#deleteSo{{this.0.idexpense}}" >Hapus</a>
                                                    {{/compare}}
                                                {{/compare}}
                                                <a href="#!" class="modal-close waves-effect waves-light btn grey darken-1 left mb-10 ml-10">Tutup</a>
                                            </div>
                                        </form>
                                    </div>

                                    <div id="deleteSo{{this.0.idexpense}}" class="modal">
                                        <form action="" method="post">
                                            <div class="modal-content">
                                                <div class="col s12 container">
                                                    <div class="col s12 center">
                                                        <span class="font-20 hide-on-med-and-up">Konfirmasi Hapus Pengeluaran</span>
                                                        <span class="font-40 hide-on-small-only">Konfirmasi Hapus Pengeluaran</span>
                                                    </div>
                                                    <div class="col s12 mb-20">
                                                        <p class="hide-on-med-and-up">Apakah anda yakin ingin menghapus Expense ini ?</p>
                                                        <p class="font-20 hide-on-small-only">Apakah anda yakin ingin menghapus Expense ini ?</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer modal-fixed-footer">
                                                <input name="deletedExpId" type="hidden" value="{{this.0.orderid}}">
                                                <button type="submit" name="hapusEpxBtn" value="{{this.0.idexpense}}" id="hapusSoBtn" class="modal-close waves-effect waves-light btn red darken-3 left ml-10 mb-10">Hapus</button>
                                                <a href="#!" class="modal-close waves-effect waves-light btn grey darken-1 left mb-10">Cancel</a>
                                            </div>
                                        </form>
                                    </div>
                                </td>
                            </tr>
                        {{/each}}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>